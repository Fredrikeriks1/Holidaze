{"ast":null,"code":"import _regeneratorRuntime from\"/Users/fredrikeriksen/Documents/FEU/PE2/my-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/fredrikeriksen/Documents/FEU/PE2/my-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/fredrikeriksen/Documents/FEU/PE2/my-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useForm}from\"react-hook-form\";import{useParams}from\"react-router-dom\";import{useHistory}from\"react-router-dom\";import{BASE_URL,headers}from\"../../constants/api\";import DeleteMessage from\"./DeleteMessage\";import Spinner from\"../spinner/Spinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Edit(){var defaultState={name:\"\",email:\"\"};var history=useHistory();var _useForm=useForm(),handleSubmit=_useForm.handleSubmit;var _useState=useState(defaultState),_useState2=_slicedToArray(_useState,2),contact=_useState2[0],setContact=_useState2[1];var _useParams=useParams(),id=_useParams.id;var options={headers:headers};var fetchUrl=BASE_URL+\"contacts/\"+id;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){fetch(fetchUrl,options).then(function(response){return response.json();}).then(function(json){return setContact(json);}).catch(function(error){return console.debug(error);}).finally(function(){return setLoading(false);});});if(loading){return/*#__PURE__*/_jsx(Spinner,{});}function onSubmit(_x){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"data\",data);_context.next=3;return fetch(fetchUrl);case 3:history.push(\"/admin/messages\");case 4:case\"end\":return _context.stop();}}},_callee);}));return _onSubmit.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"view-message\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"admin-form\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-link\",children:\"\\u2190 Back to messages\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[contact.name,\" \",/*#__PURE__*/_jsx(\"span\",{children:contact.email})]}),/*#__PURE__*/_jsx(\"a\",{title:\"reply\",href:\"mailto:\".concat(contact.email),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-reply\"})}),/*#__PURE__*/_jsx(DeleteMessage,{id:id})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:contact.message})})]})});}export default Edit;","map":{"version":3,"sources":["/Users/fredrikeriksen/Documents/FEU/PE2/my-project/src/components/admin/ViewMessage.js"],"names":["React","useState","useEffect","useForm","useParams","useHistory","BASE_URL","headers","DeleteMessage","Spinner","Edit","defaultState","name","email","history","handleSubmit","contact","setContact","id","options","fetchUrl","loading","setLoading","fetch","then","response","json","catch","error","console","debug","finally","onSubmit","data","log","push","message"],"mappings":"wfAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,QAAT,CAAmBC,OAAnB,KAAkC,qBAAlC,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,C,wFAEA,QAASC,CAAAA,IAAT,EAAgB,CACd,GAAMC,CAAAA,YAAY,CAAG,CACnBC,IAAI,CAAE,EADa,CAEnBC,KAAK,CAAE,EAFY,CAArB,CAKA,GAAMC,CAAAA,OAAO,CAAGT,UAAU,EAA1B,CACA,aAAyBF,OAAO,EAAhC,CAAQY,YAAR,UAAQA,YAAR,CACA,cAA8Bd,QAAQ,CAACU,YAAD,CAAtC,wCAAOK,OAAP,eAAgBC,UAAhB,eACA,eAAab,SAAS,EAAtB,CAAMc,EAAN,YAAMA,EAAN,CACA,GAAMC,CAAAA,OAAO,CAAG,CAAEZ,OAAO,CAAPA,OAAF,CAAhB,CACA,GAAMa,CAAAA,QAAQ,CAAGd,QAAQ,CAAG,WAAX,CAAyBY,EAA1C,CACA,eAA8BjB,QAAQ,CAAC,IAAD,CAAtC,yCAAOoB,OAAP,eAAgBC,UAAhB,eAEApB,SAAS,CAAC,UAAM,CACdqB,KAAK,CAACH,QAAD,CAAWD,OAAX,CAAL,CACGK,IADH,CACQ,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EADR,EAEGF,IAFH,CAEQ,SAACE,IAAD,QAAUT,CAAAA,UAAU,CAACS,IAAD,CAApB,EAFR,EAGGC,KAHH,CAGS,SAACC,KAAD,QAAWC,CAAAA,OAAO,CAACC,KAAR,CAAcF,KAAd,CAAX,EAHT,EAIGG,OAJH,CAIW,iBAAMT,CAAAA,UAAU,CAAC,KAAD,CAAhB,EAJX,EAKD,CANQ,CAAT,CAQA,GAAID,OAAJ,CAAa,CACX,mBAAO,KAAC,OAAD,IAAP,CACD,CAxBa,QA0BCW,CAAAA,QA1BD,oIA0Bd,iBAAwBC,IAAxB,kHACEJ,OAAO,CAACK,GAAR,CAAY,MAAZ,CAAoBD,IAApB,EADF,sBAEQV,CAAAA,KAAK,CAACH,QAAD,CAFb,QAGEN,OAAO,CAACqB,IAAR,CAAa,iBAAb,EAHF,sDA1Bc,2CAgCd,mBACE,YAAK,SAAS,CAAC,cAAf,uBACE,cAAM,SAAS,CAAC,YAAhB,CAA6B,QAAQ,CAAEpB,YAAY,CAACiB,QAAD,CAAnD,wBACE,eAAQ,SAAS,CAAC,UAAlB,qCADF,cAEE,oCACE,qBACGhB,OAAO,CAACJ,IADX,kBACiB,sBAAOI,OAAO,CAACH,KAAf,EADjB,GADF,cAIE,UAAG,KAAK,CAAC,OAAT,CAAiB,IAAI,kBAAYG,OAAO,CAACH,KAApB,CAArB,uBACE,UAAG,SAAS,CAAC,cAAb,EADF,EAJF,cAOE,KAAC,aAAD,EAAe,EAAE,CAAEK,EAAnB,EAPF,GAFF,cAWE,kCACE,mBAAIF,OAAO,CAACoB,OAAZ,EADF,EAXF,GADF,EADF,CAmBD,CAED,cAAe1B,CAAAA,IAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useParams } from \"react-router-dom\";\nimport { useHistory } from \"react-router-dom\";\nimport { BASE_URL, headers } from \"../../constants/api\";\nimport DeleteMessage from \"./DeleteMessage\";\nimport Spinner from \"../spinner/Spinner\";\n\nfunction Edit() {\n  const defaultState = {\n    name: \"\",\n    email: \"\",\n  };\n\n  const history = useHistory();\n  const { handleSubmit } = useForm();\n  const [contact, setContact] = useState(defaultState);\n  let { id } = useParams();\n  const options = { headers };\n  const fetchUrl = BASE_URL + \"contacts/\" + id;\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetch(fetchUrl, options)\n      .then((response) => response.json())\n      .then((json) => setContact(json))\n      .catch((error) => console.debug(error))\n      .finally(() => setLoading(false));\n  });\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  async function onSubmit(data) {\n    console.log(\"data\", data);\n    await fetch(fetchUrl);\n    history.push(\"/admin/messages\");\n  }\n\n  return (\n    <div className=\"view-message\">\n      <form className=\"admin-form\" onSubmit={handleSubmit(onSubmit)}>\n        <button className=\"btn-link\">&#8592; Back to messages</button>\n        <div>\n          <p>\n            {contact.name} <span>{contact.email}</span>\n          </p>\n          <a title=\"reply\" href={`mailto:${contact.email}`}>\n            <i className=\"fas fa-reply\"></i>\n          </a>\n          <DeleteMessage id={id} />\n        </div>\n        <div>\n          <p>{contact.message}</p>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default Edit;\n"]},"metadata":{},"sourceType":"module"}