{"ast":null,"code":"import _regeneratorRuntime from\"/Users/fredrikeriksen/Documents/FEU/PE2/my-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/fredrikeriksen/Documents/FEU/PE2/my-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/fredrikeriksen/Documents/FEU/PE2/my-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useForm}from\"react-hook-form\";import{useParams}from\"react-router-dom\";import{useHistory}from\"react-router-dom\";import{BASE_URL,headers,PATCH}from\"../../constants/api\";import Delete from\"./DeleteEstablishment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Edit(){var defaultState={name:\"\",email:\"\"};var history=useHistory();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;var _useState=useState(defaultState),_useState2=_slicedToArray(_useState,2),hotel=_useState2[0],setHotel=_useState2[1];var _useParams=useParams(),id=_useParams.id;var options={headers:headers};var fetchUrl=BASE_URL+\"establishments/\"+id;useEffect(function(){fetch(fetchUrl,options).then(function(response){return response.json();}).then(function(json){return setHotel(json);}).catch(function(error){return console.debug(error);});});function onSubmit(_x){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var updateOptions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"data\",data);updateOptions={headers:headers,method:PATCH,body:JSON.stringify(data)};_context.next=4;return fetch(fetchUrl,updateOptions);case 4:history.push(\"/admin/establishments\");case 5:case\"end\":return _context.stop();}}},_callee);}));return _onSubmit.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"edit\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"admin-form\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Edit establishment\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name: \"}),/*#__PURE__*/_jsx(\"input\",{title:\"Name\",type:\"name\",name:\"name\",defaultValue:hotel.name,placeholder:\"Enter name for the hotel\",ref:register})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"E-mail: \"}),/*#__PURE__*/_jsx(\"input\",{title:\"E-mail\",type:\"email\",name:\"email\",defaultValue:hotel.email,placeholder:\"Enter an email address\",ref:register})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"topic-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Price: \"}),/*#__PURE__*/_jsx(\"input\",{title:\"Price\",type:\"number\",name:\"price\",defaultValue:hotel.price,placeholder:\"00\",ref:register}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"maxGuests\",children:\"Maximum guests: \"}),/*#__PURE__*/_jsx(\"input\",{title:\"Maximum number of guests\",type:\"number\",name:\"maxGuests\",defaultValue:hotel.maxGuests,placeholder:\"00\",ref:register})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:\"Image URL: \"}),/*#__PURE__*/_jsx(\"input\",{title:\"Image URL\",type:\"url\",name:\"image\",defaultValue:hotel.image,placeholder:\"URL\",ref:register})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description: \"}),/*#__PURE__*/_jsx(\"input\",{title:\"Description\",type:\"text\",name:\"description\",defaultValue:hotel.description,placeholder:\"description\",ref:register})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"topic-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lat\",children:\"Latitude: \"}),/*#__PURE__*/_jsx(\"input\",{title:\"Latitude\",type:\"number\",name:\"lat\",defaultValue:hotel.lat,placeholder:\"00.000000\",ref:register}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lng\",children:\"Longitude: \"}),/*#__PURE__*/_jsx(\"input\",{title:\"Longitude\",type:\"number\",name:\"lng\",defaultValue:hotel.lng,placeholder:\"00.000000\",ref:register})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",children:\"address\"}),/*#__PURE__*/_jsx(\"input\",{title:\"Address\",type:\"address\",name:\"address\",defaultValue:hotel.address,placeholder:\"address\",ref:register})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{title:\"Reset from\",className:\"btn-white\",type:\"reset\",children:\"Reset\"}),/*#__PURE__*/_jsx(\"button\",{title:\"Update establishment\",className:\"btn-blue\",type:\"submit\",children:\"Update\"}),/*#__PURE__*/_jsx(Delete,{id:id})]})]})});}export default Edit;","map":{"version":3,"sources":["/Users/fredrikeriksen/Documents/FEU/PE2/my-project/src/components/admin/Edit.js"],"names":["React","useState","useEffect","useForm","useParams","useHistory","BASE_URL","headers","PATCH","Delete","Edit","defaultState","name","email","history","register","handleSubmit","hotel","setHotel","id","options","fetchUrl","fetch","then","response","json","catch","error","console","debug","onSubmit","data","log","updateOptions","method","body","JSON","stringify","push","price","maxGuests","image","description","lat","lng","address"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useParams } from \"react-router-dom\";\nimport { useHistory } from \"react-router-dom\";\nimport { BASE_URL, headers, PATCH } from \"../../constants/api\";\nimport Delete from \"./DeleteEstablishment\";\n\nfunction Edit() {\n  const defaultState = {\n    name: \"\",\n    email: \"\",\n  };\n\n  const history = useHistory();\n  const { register, handleSubmit } = useForm();\n  const [hotel, setHotel] = useState(defaultState);\n  let { id } = useParams();\n  const options = { headers };\n  const fetchUrl = BASE_URL + \"establishments/\" + id;\n\n  useEffect(() => {\n    fetch(fetchUrl, options)\n      .then((response) => response.json())\n      .then((json) => setHotel(json))\n      .catch((error) => console.debug(error));\n  });\n\n  async function onSubmit(data) {\n    console.log(\"data\", data);\n    const updateOptions = {\n      headers,\n      method: PATCH,\n      body: JSON.stringify(data),\n    };\n    await fetch(fetchUrl, updateOptions);\n    history.push(\"/admin/establishments\");\n  }\n\n  return (\n    <div className=\"edit\">\n      <form className=\"admin-form\" onSubmit={handleSubmit(onSubmit)}>\n        <div>\n          <h2>Edit establishment</h2>\n        </div>\n\n        <div>\n          <label htmlFor=\"name\">Name: </label>\n          <input\n            title=\"Name\"\n            type=\"name\"\n            name=\"name\"\n            defaultValue={hotel.name}\n            placeholder=\"Enter name for the hotel\"\n            ref={register}\n          />\n        </div>\n\n        <div>\n          <label htmlFor=\"email\">E-mail: </label>\n          <input\n            title=\"E-mail\"\n            type=\"email\"\n            name=\"email\"\n            defaultValue={hotel.email}\n            placeholder=\"Enter an email address\"\n            ref={register}\n          />\n        </div>\n\n        <div className=\"topic-group\">\n          <label htmlFor=\"price\">Price: </label>\n          <input\n            title=\"Price\"\n            type=\"number\"\n            name=\"price\"\n            defaultValue={hotel.price}\n            placeholder=\"00\"\n            ref={register}\n          />\n          <label htmlFor=\"maxGuests\">Maximum guests: </label>\n          <input\n            title=\"Maximum number of guests\"\n            type=\"number\"\n            name=\"maxGuests\"\n            defaultValue={hotel.maxGuests}\n            placeholder=\"00\"\n            ref={register}\n          />\n        </div>\n\n        <div>\n          <label htmlFor=\"image\">Image URL: </label>\n          <input\n            title=\"Image URL\"\n            type=\"url\"\n            name=\"image\"\n            defaultValue={hotel.image}\n            placeholder=\"URL\"\n            ref={register}\n          />\n        </div>\n\n        <div>\n          <label htmlFor=\"description\">Description: </label>\n          <input\n            title=\"Description\"\n            type=\"text\"\n            name=\"description\"\n            defaultValue={hotel.description}\n            placeholder=\"description\"\n            ref={register}\n          />\n        </div>\n\n        <div className=\"topic-group\">\n          <label htmlFor=\"lat\">Latitude: </label>\n          <input\n            title=\"Latitude\"\n            type=\"number\"\n            name=\"lat\"\n            defaultValue={hotel.lat}\n            placeholder=\"00.000000\"\n            ref={register}\n          />\n          <label htmlFor=\"lng\">Longitude: </label>\n          <input\n            title=\"Longitude\"\n            type=\"number\"\n            name=\"lng\"\n            defaultValue={hotel.lng}\n            placeholder=\"00.000000\"\n            ref={register}\n          />\n        </div>\n\n        <div>\n          <label htmlFor=\"address\">address</label>\n          <input\n            title=\"Address\"\n            type=\"address\"\n            name=\"address\"\n            defaultValue={hotel.address}\n            placeholder=\"address\"\n            ref={register}\n          />\n        </div>\n\n        <div className=\"btn-group\">\n          <button title=\"Reset from\" className=\"btn-white\" type=\"reset\">\n            Reset\n          </button>\n          <button\n            title=\"Update establishment\"\n            className=\"btn-blue\"\n            type=\"submit\"\n          >\n            Update\n          </button>\n          <Delete id={id} />\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default Edit;\n"]},"metadata":{},"sourceType":"module"}