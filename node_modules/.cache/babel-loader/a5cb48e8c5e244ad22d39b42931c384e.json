{"ast":null,"code":"import _regeneratorRuntime from\"/Users/fredrikeriksen/Documents/FEU/PE2/my-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/fredrikeriksen/Documents/FEU/PE2/my-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/fredrikeriksen/Documents/FEU/PE2/my-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/fredrikeriksen/Documents/FEU/PE2/my-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useForm}from\"react-hook-form\";import{useParams}from\"react-router-dom\";import{useHistory}from\"react-router-dom\";import{BASE_URL,headers}from\"../../constants/api\";import{Link}from\"react-router-dom\";import*as yup from\"yup\";import{yupResolver}from\"@hookform/resolvers/yup\";import{Helmet}from\"react-helmet\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var schema=yup.object().shape({name:yup.string().min(2,\"Name is required\").matches(/[a-zA-z-\\s]/g,\"Only characters A-Z are valid\").required(),email:yup.string().email(\"E-mail is not valid\",{regex:/^[\\d-_.a-zA-z]+@[\\d-_.a-zA-z]+\\.[a-zA-z]+$/g}).required(\"E-mail is required\"),checkIn:yup.string().required(\"Date is required\"),checkOut:yup.string().required(\"Date is required\")});function Enquiry(){var _errors$name,_errors$email,_errors$checkIn,_errors$checkOut;var defaultState={name:\"\",email:\"\",checkIn:\"\",checkOut:\"\"};var history=useHistory();var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var _useState=useState(defaultState),_useState2=_slicedToArray(_useState,2),hotel=_useState2[0],setHotel=_useState2[1];var _useParams=useParams(),id=_useParams.id;var options={headers:headers};var fetchUrl=BASE_URL+\"establishments/\"+id;useEffect(function(){fetch(fetchUrl,options).then(function(response){return response.json();}).then(function(json){return setHotel(json);}).catch(function(error){return console.debug(error);});});function onSubmit(_x){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var url,options,con;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"data\",data);url=BASE_URL+\"enquiries\";options={headers:headers,method:\"POST\",body:JSON.stringify(_objectSpread(_objectSpread({},data),{},{establishmentId:id}))};_context.next=5;return fetch(url,options);case 5:con=window.confirm(\"Thanks for choosing \"+hotel.name+\"\\nYou will typically get a response within 48 hours\");if(con===true){localStorage.setItem(\"enquiry\",JSON.stringify(data));}if(con===false){localStorage.setItem(\"cancel\",\"enquiry was canceled\");}//window.localStorage.clear();\nhistory.push(\"/\");case 9:case\"end\":return _context.stop();}}},_callee);}));return _onSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"enquiry\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsxs(\"title\",{children:[\"Book \",hotel.name,\" | Holidaze\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"enquiry__dark\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Book Your Stay at \",hotel.name]}),/*#__PURE__*/_jsx(\"p\",{children:\"Fill out the form to book your accommodations\"}),/*#__PURE__*/_jsx(Link,{to:\"../accommodations/\",children:\"\\u2190 Keep browsing\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"enquiry-form\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"h1\",{className:\"big-screen\",children:\"Booking Enquiry\"}),/*#__PURE__*/_jsx(\"p\",{className:\"big-screen\",title:\"Please fill out the form\",children:\"Please fill out the form\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"small-screen\",children:\"Enquiry\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"small-screen\",title:\"Please fill out the form\",children:[\"Please fill out the form to book your stay at \",hotel.name]}),/*#__PURE__*/_jsx(\"input\",{title:\"Name\",placeholder:\"name\",type:\"name\",name:\"name\",ref:register}),/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:(_errors$name=errors.name)===null||_errors$name===void 0?void 0:_errors$name.message}),/*#__PURE__*/_jsx(\"input\",{title:\"E-mail\",placeholder:\"e-mail\",type:\"email\",name:\"email\",ref:register}),/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"checkIn\",children:\"Check in\"}),/*#__PURE__*/_jsx(\"input\",{title:\"Check in date\",type:\"date\",name:\"checkIn\",ref:register}),/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:(_errors$checkIn=errors.checkIn)===null||_errors$checkIn===void 0?void 0:_errors$checkIn.message}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"checkOut\",children:\"Check out\"}),/*#__PURE__*/_jsx(\"input\",{title:\"Check out date\",type:\"date\",name:\"checkOut\",ref:register}),/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:(_errors$checkOut=errors.checkOut)===null||_errors$checkOut===void 0?void 0:_errors$checkOut.message}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{title:\"Submit form\",type:\"submit\",className:\"btn-blue\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{title:\"Reset form\",type:\"reset\",className:\"btn-white\",children:\"Reset\"})]})]})})]});}export default Enquiry;","map":{"version":3,"sources":["/Users/fredrikeriksen/Documents/FEU/PE2/my-project/src/components/enquiry/Enquiry.js"],"names":["React","useState","useEffect","useForm","useParams","useHistory","BASE_URL","headers","Link","yup","yupResolver","Helmet","schema","object","shape","name","string","min","matches","required","email","regex","checkIn","checkOut","Enquiry","defaultState","history","resolver","register","handleSubmit","errors","hotel","setHotel","id","options","fetchUrl","fetch","then","response","json","catch","error","console","debug","onSubmit","data","log","url","method","body","JSON","stringify","establishmentId","con","window","confirm","localStorage","setItem","push","message"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useParams } from \"react-router-dom\";\nimport { useHistory } from \"react-router-dom\";\nimport { BASE_URL, headers } from \"../../constants/api\";\nimport { Link } from \"react-router-dom\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { Helmet } from \"react-helmet\";\n\nconst schema = yup.object().shape({\n  name: yup\n    .string()\n    .min(2, \"Name is required\")\n    .matches(/[a-zA-z-\\s]/g, \"Only characters A-Z are valid\")\n    .required(),\n  email: yup\n    .string()\n    .email(\"E-mail is not valid\", {\n      regex: /^[\\d-_.a-zA-z]+@[\\d-_.a-zA-z]+\\.[a-zA-z]+$/g,\n    })\n    .required(\"E-mail is required\"),\n  checkIn: yup.string().required(\"Date is required\"),\n  checkOut: yup.string().required(\"Date is required\"),\n});\n\nfunction Enquiry() {\n  const defaultState = {\n    name: \"\",\n    email: \"\",\n    checkIn: \"\",\n    checkOut: \"\",\n  };\n\n  const history = useHistory();\n  const { register, handleSubmit, errors } = useForm({\n    resolver: yupResolver(schema),\n  });\n  const [hotel, setHotel] = useState(defaultState);\n  let { id } = useParams();\n  const options = { headers };\n  const fetchUrl = BASE_URL + \"establishments/\" + id;\n\n  useEffect(() => {\n    fetch(fetchUrl, options)\n      .then((response) => response.json())\n      .then((json) => setHotel(json))\n      .catch((error) => console.debug(error));\n  });\n\n  async function onSubmit(data) {\n    console.log(\"data\", data);\n    const url = BASE_URL + \"enquiries\";\n    const options = {\n      headers,\n      method: \"POST\",\n      body: JSON.stringify({ ...data, establishmentId: id }),\n    };\n    await fetch(url, options);\n    var con = window.confirm(\n      \"Thanks for choosing \" +\n        hotel.name +\n        \"\\nYou will typically get a response within 48 hours\"\n    );\n\n    if (con === true) {\n      localStorage.setItem(\"enquiry\", JSON.stringify(data));\n    }\n    if (con === false) {\n      localStorage.setItem(\"cancel\", \"enquiry was canceled\");\n    }\n    //window.localStorage.clear();\n\n    history.push(\"/\");\n  }\n\n  return (\n    <div className=\"enquiry\">\n      <Helmet>\n        <title>Book {hotel.name} | Holidaze</title>\n      </Helmet>\n      <div className=\"enquiry__dark\">\n        <h3>Book Your Stay at {hotel.name}</h3>\n        <p>Fill out the form to book your accommodations</p>\n        <Link to={\"../accommodations/\"}>&#8592; Keep browsing</Link>\n      </div>\n      <div>\n        <form className=\"enquiry-form\" onSubmit={handleSubmit(onSubmit)}>\n          <h1 className=\"big-screen\">Booking Enquiry</h1>\n          <p className=\"big-screen\" title=\"Please fill out the form\">\n            Please fill out the form\n          </p>\n          <h1 className=\"small-screen\">Enquiry</h1>\n          <p className=\"small-screen\" title=\"Please fill out the form\">\n            Please fill out the form to book your stay at {hotel.name}\n          </p>\n\n          <input\n            title=\"Name\"\n            placeholder=\"name\"\n            type=\"name\"\n            name=\"name\"\n            ref={register}\n          />\n          <span className=\"error\">{errors.name?.message}</span>\n\n          <input\n            title=\"E-mail\"\n            placeholder=\"e-mail\"\n            type=\"email\"\n            name=\"email\"\n            ref={register}\n          />\n          <span className=\"error\">{errors.email?.message}</span>\n\n          <label htmlFor=\"checkIn\">Check in</label>\n          <input\n            title=\"Check in date\"\n            type=\"date\"\n            name=\"checkIn\"\n            ref={register}\n          />\n          <span className=\"error\">{errors.checkIn?.message}</span>\n\n          <label htmlFor=\"checkOut\">Check out</label>\n          <input\n            title=\"Check out date\"\n            type=\"date\"\n            name=\"checkOut\"\n            ref={register}\n          />\n          <span className=\"error\">{errors.checkOut?.message}</span>\n\n          <div className=\"btn-group\">\n            <button title=\"Submit form\" type=\"submit\" className=\"btn-blue\">\n              Submit\n            </button>\n            <button title=\"Reset form\" type=\"reset\" className=\"btn-white\">\n              Reset\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default Enquiry;\n"]},"metadata":{},"sourceType":"module"}